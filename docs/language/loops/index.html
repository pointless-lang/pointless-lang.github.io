<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="/icons/icon.png"
      media="(prefers-color-scheme: light)"
    />
    <link
      rel="icon"
      href="/icons/icon-light.png"
      media="(prefers-color-scheme: dark)"
    />
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <title>Loops</title>
  </head>

  <body>
    <header>
      <a id="logo" href="/">
        <img src="/icons/icon.svg" />
        Pointless
      </a>

      <nav>
        <ul>
          <li><a href="/intro/">Intro</a></li>
          <li><a href="/philosophy/">Philosophy</a></li>
          <li><a href="/language/">Language</a></li>
          <li><a href="/stdlib/">Standard Library</a></li>
          <li><a href="/articles/">Articles</a></li>
          <li><a href="/editor/">Editor</a></li>
        </ul>
      </nav>
    </header>

    <article>
      <div id="title">
        <h1>
          <a href=".." id="parent">Language Reference:</a> <a href=".">Loops</a>
        </h1>
        <p>For and while loops, running code iteratively (multiple times)</p>
      </div>

      <main>
        <p>
          Loops allow programs to run code <em>iteratively</em> (multiple
          times). Pointless has two traditional looping constructs:
          <code>for</code> loops and <code>while</code> loops.
        </p>

        <hr />

        <h2 id="for-loops">
          <a href="#for-loops">For Loops</a>
        </h2>
        <p>The basic form of a <code>for</code> loop has the syntax</p>

        <div class="snippet undefined">
          <pre><code class="ptls"><span class="keyword">for</span> variable <span class="keyword">in</span> sequence <span class="keyword">do</span>
  ...block
<span class="keyword">end</span></code></pre>
        </div>
        <p>in which</p>
        <ul>
          <li>
            <code>variable</code> is a valid
            <a href="../variables#defining-variables">variable name</a>
          </li>
          <li>
            <code>sequence</code> is an expression that evaluates to a list,
            table, object, or set
          </li>
          <li>
            <code>...block</code> is a
            <a href="misc#code-blocks">code block</a> that is evaluated once for
            each value in <code>sequence</code>
          </li>
        </ul>
        <p>
          A <code>for</code> loop iterates over the values in a data-structure
          <code>sequence</code>. Those values will be:
        </p>
        <ul>
          <li>List elements, if <code>sequence</code> is a list</li>
          <li>Table rows, if <code>sequence</code> is a table</li>
          <li>Object keys, if <code>sequence</code> is a object</li>
          <li>Set items, if <code>sequence</code> is a set</li>
        </ul>
        <p>
          For each value in <code>sequence</code>, the <code>for</code> loop
          will store the value in <code>variable</code> and evaluate the code in
          <code>...block</code>. In the example below, the code
          <code>total += n</code> runs <code>5</code> times, once for each value
          in <code>numbers</code>, with <code>n</code> taking on the value of
          each number in <code>numbers</code> in order.
        </p>

        <div class="snippet undefined">
          <pre><code class="ptls">numbers <span class="operator">=</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]
total <span class="operator">=</span> <span class="number">0</span>

<span class="keyword">for</span> n <span class="keyword">in</span> numbers <span class="keyword">do</span>
  total <span class="operator">+=</span> n
<span class="keyword">end</span>

total</code></pre>
          <pre class="result" style="undefined"><code>15
</code></pre>
        </div>
        <p>
          <code>for</code> loops are
          <a href="../misc#statements">statements</a>, meaning they don&#39;t
          produce values directly. Instead, they are used to run code containing
          <a href="../misc#side-effects">side effects</a> (like updating a
          variable).
        </p>
        <p>
          Note that the <a href="../pipelines#map">map</a> <code>$</code> and
          <a href="../pipelines#filter">filter</a> <code>?</code> operators are
          often used instead of <code>for</code> loops.
        </p>

        <hr />

        <h2 id="tandem-for-loops">
          <a href="#tandem-for-loops">Tandem For Loops</a>
        </h2>
        <ul>
          <li>
            <p>list</p>

            <div class="snippet undefined">
              <pre><code class="ptls"><span class="keyword">for</span> index, elem <span class="keyword">in</span> list <span class="keyword">do</span>
  ...block
<span class="keyword">end</span></code></pre>
            </div>
          </li>
          <li>
            <p>table</p>

            <div class="snippet undefined">
              <pre><code class="ptls"><span class="keyword">for</span> index, row <span class="keyword">in</span> table <span class="keyword">do</span>
  ...block
<span class="keyword">end</span></code></pre>
            </div>
          </li>
          <li>
            <p>object</p>

            <div class="snippet undefined">
              <pre><code class="ptls"><span class="keyword">for</span> key, value <span class="keyword">in</span> object <span class="keyword">do</span>
  ...block
<span class="keyword">end</span></code></pre>
            </div>
          </li>
        </ul>

        <div class="snippet undefined">
          <pre><code class="ptls">states <span class="operator">=</span> [<span class="quotes">&quot;</span><span class="string">Afghanistan</span><span class="quotes">&quot;</span>, <span class="quotes">&quot;</span><span class="string">Albania</span><span class="quotes">&quot;</span>, <span class="quotes">&quot;</span><span class="string">Algeria</span><span class="quotes">&quot;</span>, <span class="quotes">&quot;</span><span class="string">Andorra</span><span class="quotes">&quot;</span>, <span class="quotes">&quot;</span><span class="string">Angola</span><span class="quotes">&quot;</span>]

<span class="keyword">for</span> index, state <span class="keyword">in</span> states <span class="keyword">do</span>
  <span class="call">print</span>(<span class="quotes">&quot;</span><span class="interpolated">$index</span><span class="string"> </span><span class="interpolated">$state</span><span class="quotes">&quot;</span>)
<span class="keyword">end</span></code></pre>
          <pre class="result" style="undefined"><code>0 Afghanistan
1 Albania
2 Algeria
3 Andorra
4 Angola
</code></pre>
        </div>
        <hr />

        <h2 id="anonymous-for-loops">
          <a href="#anonymous-for-loops">Anonymous For Loops</a>
        </h2>

        <div class="snippet undefined">
          <pre><code class="ptls">fibonacci <span class="operator">=</span> [<span class="number">0</span>, <span class="number">1</span>]

<span class="comment">-- Add the next 5 Fibonacci numbers to the list</span>
<span class="keyword">for</span> <span class="number">10</span> <span class="keyword">do</span>
  fibonacci <span class="operator">|=</span> <span class="call">push</span>(fibonacci[<span class="operator">-</span><span class="number">1</span>] <span class="operator">+</span> fibonacci[<span class="operator">-</span><span class="number">2</span>])
<span class="keyword">end</span>

fibonacci</code></pre>
          <pre
            class="result"
            style="undefined"
          ><code>[0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89]
</code></pre>
        </div>
        <hr />

        <h2 id="while-loops">
          <a href="#while-loops">While Loops</a>
        </h2>

        <div class="snippet undefined">
          <pre><code class="ptls">n <span class="operator">=</span> <span class="number">7</span>
seq <span class="operator">=</span> [n]

<span class="keyword">while</span> n <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">do</span>
  n <span class="operator">=</span> <span class="keyword">if</span> <span class="std">Math</span>.<span class="call">isEven</span>(n) <span class="keyword">then</span> n <span class="operator">/</span> <span class="number">2</span> <span class="keyword">else</span> n <span class="operator">*</span> <span class="number">3</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">end</span>
  seq <span class="operator">|=</span> <span class="call">push</span>(n)
<span class="keyword">end</span>

seq</code></pre>
          <pre
            class="result"
            style="undefined"
          ><code>[7, 22, 11, 34, 17, 52, 26, 13, 40, 20, 10, 5, 16, 8, 4, 2, 1]
</code></pre>
        </div>

        <div id="sequencer">
          <hr />
          <div>
            <a href="/language/pipelines">
              <div>Previous</div>
              Pipelines
            </a>

            <a class="next" href="/language/async">
              <div>Next</div>
              Async
            </a>
          </div>
        </div>
      </main>
    </article>
  </body>
</html>
