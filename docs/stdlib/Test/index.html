<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="/icons/icon.png"
      media="(prefers-color-scheme: light)"
    />
    <link
      rel="icon"
      href="/icons/icon-light.png"
      media="(prefers-color-scheme: dark)"
    />
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <title>Test</title>
  </head>

  <body>
    <header>
      <a id="logo" href="/">
        <img src="/icons/icon.svg" />
        Pointless
      </a>

      <nav>
        <ul>
          <li><a href="/intro/">Intro</a></li>
          <li><a href="/philosophy/">Philosophy</a></li>
          <li><a href="/language/">Language</a></li>
          <li><a href="/stdlib/">Standard Library</a></li>
          <li><a href="/articles/">Articles</a></li>
          <li><a href="/editor/">Editor</a></li>
        </ul>
      </nav>
    </header>

    <article>
      <div id="title">
        <h1>
          <a href=".." id="parent">Standard Library:</a> <a href=".">Test</a>
        </h1>
        <p>Write tests and verify program behavior</p>
      </div>

      <main>
        <ol class="contents std">
          <li><a href="#assert">assert</a></li>
          <li><a href="#equals">equals</a></li>
          <li><a href="#returns">returns</a></li>
          <li><a href="#runs">runs</a></li>
          <li><a href="#throws">throws</a></li>
        </ol>

        <hr />

        <h2 class="def-name" id="assert">
          <code><a href="#assert">Test.assert(predicate)</a></code>
          <span class="tag" title="Global"></span>
        </h2>

        <div class="def-info">
          <p>
            Panic if the boolean <code>predicate</code> is <code>false</code>.
          </p>

          <div class="snippet undefined">
            <pre><code class="ptls"><span class="call">assert</span>(<span class="number">1</span> <span class="operator">+</span> <span class="number">1</span> <span class="operator">==</span> <span class="number">2</span>)</code></pre>
            <pre class="result"><code>none
</code></pre>
          </div>
          <div class="snippet undefined">
            <pre><code class="ptls"><span class="call">assert</span>(<span class="number">1</span> <span class="operator">+</span> <span class="number">1</span> <span class="operator">==</span> <span class="number">11</span>)</code></pre>

            <pre class="result panic"><code>panic: assertion error

assert(1 + 1 == 11)
      ^
At Test:embedded:1:7</code></pre>
          </div>
        </div>

        <hr />

        <h2 class="def-name" id="equals">
          <code><a href="#equals">Test.equals(actual, expected)</a></code>
        </h2>

        <div class="def-info">
          <p>Check that <code>actual</code> equals <code>expected</code>.</p>

          <div class="snippet undefined">
            <pre><code class="ptls"><span class="std">Test</span>.<span class="call">equals</span>(<span class="number">2</span> <span class="operator">+</span> <span class="number">2</span>, <span class="number">4</span>)
<span class="std">Test</span>.<span class="call">equals</span>(<span class="number">1</span> <span class="operator">+</span> <span class="number">1</span>, <span class="number">11</span>)</code></pre>
            <pre class="result"><code>{ status: &quot;pass&quot; }
{ status: &quot;fail&quot;, expected: 11, got: 2 }
</code></pre>
          </div>
        </div>

        <hr />

        <h2 class="def-name" id="returns">
          <code><a href="#returns">Test.returns(func, expected)</a></code>
        </h2>

        <div class="def-info">
          <p>Check that <code>func</code> returns <code>expected</code>.</p>

          <div class="snippet undefined">
            <pre><code class="ptls"><span class="std">Test</span>.<span class="call">returns</span>(<span class="keyword">fn</span>() <span class="number">2</span> <span class="operator">+</span> <span class="number">2</span> <span class="keyword">end</span>, <span class="number">4</span>)
<span class="std">Test</span>.<span class="call">returns</span>(<span class="keyword">fn</span>() <span class="number">1</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">end</span>, <span class="number">11</span>)
<span class="std">Test</span>.<span class="call">returns</span>(<span class="keyword">fn</span>() <span class="number">0</span> <span class="operator">/</span> <span class="number">0</span> <span class="keyword">end</span>, <span class="number">0</span>)</code></pre>
            <pre class="result"><code>{ status: &quot;pass&quot; }
{ status: &quot;fail&quot;, expected: 11, got: 2 }
{
  status: &quot;fail&quot;,
  panic: &quot;panic: invalid arguments\n\nTest.returns(fn() 0 / 0 end, 0)\n                    ^\nAt Test:embedded:3:21 in fn()&quot;,
}
</code></pre>
          </div>
        </div>

        <hr />

        <h2 class="def-name" id="runs">
          <code><a href="#runs">Test.runs(func)</a></code>
        </h2>

        <div class="def-info">
          <p>
            Check that <code>func</code> runs without panicking or throwing an
            error.
          </p>

          <div class="snippet undefined">
            <pre><code class="ptls"><span class="keyword">fn</span> <span class="function">inverse</span>(<span class="argument">n</span>)
  <span class="call">assert</span>(n <span class="operator">!=</span> <span class="number">0</span>)
  <span class="number">1</span> <span class="operator">/</span> n
<span class="keyword">end</span>

<span class="std">Test</span>.<span class="call">runs</span>(<span class="keyword">fn</span>() <span class="call">inverse</span>(<span class="number">10</span>) <span class="keyword">end</span>)
<span class="std">Test</span>.<span class="call">runs</span>(<span class="keyword">fn</span>() <span class="call">inverse</span>(<span class="number">0</span>) <span class="keyword">end</span>)</code></pre>
            <pre class="result"><code>{ status: &quot;pass&quot; }
{
  status: &quot;fail&quot;,
  panic: &quot;panic: assertion error\n\n  assert(n != 0)\n        ^\nAt Test:embedded:2:9 in inverse(n)\n\nTest.runs(fn() inverse(0) end)\n                      ^\nAt Test:embedded:7:23 in fn()&quot;,
}
</code></pre>
          </div>
        </div>

        <hr />

        <h2 class="def-name" id="throws">
          <code><a href="#throws">Test.throws(func, payload)</a></code>
        </h2>

        <div class="def-info">
          <p>
            Check that <code>func</code> throws an error containing
            <code>payload</code>.
          </p>

          <div class="snippet undefined">
            <pre><code class="ptls"><span class="keyword">fn</span> <span class="function">inverse</span>(<span class="argument">n</span>)
  <span class="keyword">if</span> n <span class="operator">==</span> <span class="number">0</span> <span class="keyword">then</span>
    <span class="std">Err</span>.<span class="call">throw</span>(<span class="quotes">&quot;</span><span class="string">n must not be zero</span><span class="quotes">&quot;</span>)
  <span class="keyword">end</span>

  <span class="number">1</span> <span class="operator">/</span> n
<span class="keyword">end</span>

<span class="std">Test</span>.<span class="call">throws</span>(<span class="keyword">fn</span>() <span class="call">inverse</span>(<span class="number">0</span>) <span class="keyword">end</span>, <span class="quotes">&quot;</span><span class="string">n must not be zero</span><span class="quotes">&quot;</span>)
<span class="std">Test</span>.<span class="call">throws</span>(<span class="keyword">fn</span>() <span class="call">inverse</span>(<span class="number">0</span>) <span class="keyword">end</span>, <span class="quotes">&quot;</span><span class="string">wrong!</span><span class="quotes">&quot;</span>)
<span class="std">Test</span>.<span class="call">throws</span>(<span class="keyword">fn</span>() <span class="call">inverse</span>(<span class="number">10</span>) <span class="keyword">end</span>, <span class="quotes">&quot;</span><span class="string">n must not be zero</span><span class="quotes">&quot;</span>)
<span class="std">Test</span>.<span class="call">throws</span>(<span class="keyword">fn</span>() <span class="call">inverse</span>(<span class="quotes">&quot;</span><span class="string">0</span><span class="quotes">&quot;</span>) <span class="keyword">end</span>, <span class="quotes">&quot;</span><span class="string">n must not be zero</span><span class="quotes">&quot;</span>)</code></pre>
            <pre class="result"><code>{ status: &quot;pass&quot; }
{ status: &quot;fail&quot;, expected: &quot;wrong!&quot;, actual: &quot;n must not be zero&quot; }
{ status: &quot;fail&quot;, returned: 0.1 }
{
  status: &quot;fail&quot;,
  panic: &quot;panic: type error\nexpected: number\ngot: string\n\n  1 / n\n    ^\nAt Test:embedded:6:5 in inverse(n)\n\nTest.throws(fn() inverse(\&quot;0\&quot;) end, \&quot;n must not be zero\&quot;)\n                        ^\nAt Test:embedded:12:25 in fn()&quot;,
}
</code></pre>
          </div>
        </div>

        <div id="sequencer">
          <hr />
          <div>
            <a href="/stdlib/Table">
              <div>Previous</div>
              Table
            </a>
          </div>
        </div>
      </main>
    </article>
  </body>
</html>
