<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="/icons/icon.png"
      media="(prefers-color-scheme: light)"
    />
    <link
      rel="icon"
      href="/icons/icon-light.png"
      media="(prefers-color-scheme: dark)"
    />
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <title>The Standard Library: Async</title>
  </head>

  <body>
    <header>
      <a id="logo" href="/">
        <img src="/icons/icon.svg" />
        Pointless
      </a>

      <nav>
        <ul>
          <li><a href="/intro/">Intro</a></li>
          <li><a href="/philosophy/">Philosophy</a></li>
          <li><a href="/language/">Language</a></li>
          <li><a href="/stdlib/">Standard Library</a></li>
          <li><a href="/articles/">Articles</a></li>
        </ul>
      </nav>
    </header>

    <article>
      <div id="title">
        <h1>The Standard Library: Async</h1>
        <p>Manage concurrent operations</p>
      </div>

      <div id="sidebar">
        <a id="back" href="..">< Back to The Standard Library</a>
        <ul class="std">
          <li>
            <a href="#getAll">getAll</a>
          </li>

          <li>
            <a href="#getFirst">getFirst</a>
          </li>

          <li>
            <a href="#sleep">sleep</a>
            <span class="tag" title="Global"></span>
          </li>

          <li>
            <a href="#yield">yield</a>
          </li>
        </ul>
      </div>

      <main>
        <div class="snippet undefined">
          <pre><code class="ptls"><span class="std">Async</span></code></pre>
          <pre class="result" style="max-height: 200px"><code>{
  getAll: Async.getAll(funcs),
  getFirst: Async.getFirst(funcs),
  sleep: Async.sleep(ms),
  yield: Async.yield(),
}
</code></pre>
        </div>

        <hr />

        <h2 class="def-name" id="getAll">
          <code><a href="#getAll">Async.getAll(funcs)</a></code>
        </h2>

        <div class="contents">
          <p>
            Run each zero-argument function in the list
            <code>funcs</code> concurrently. Wait until all functions finish
            running and return a list of their results.
          </p>

          <div class="snippet undefined">
            <pre><code class="ptls"><span class="keyword">fn</span> <span class="function">getA</span>()
  <span class="call">sleep</span>(<span class="number">200</span>)
  <span class="quotes">&quot;</span><span class="string">a</span><span class="quotes">&quot;</span>
<span class="keyword">end</span>

<span class="keyword">fn</span> <span class="function">getB</span>()
  <span class="call">sleep</span>(<span class="number">100</span>)
  <span class="quotes">&quot;</span><span class="string">b</span><span class="quotes">&quot;</span>
<span class="keyword">end</span>

<span class="std">Async</span>.<span class="call">getAll</span>([getA, getB]) <span class="comment">-- Returns [&quot;a&quot;, &quot;b&quot;] after 200 ms</span></code></pre>
          </div>
        </div>

        <hr />

        <h2 class="def-name" id="getFirst">
          <code><a href="#getFirst">Async.getFirst(funcs)</a></code>
        </h2>

        <div class="contents">
          <p>
            Run the zero-argument functions in the list
            <code>funcs</code> concurrently and return the result of the first
            one that finishes.
          </p>
          <p>
            <em
              >Note: the functions that are still running when the first
              function finishes should be stopped; however, limitations of JS
              currently prevent this.</em
            >
          </p>

          <div class="snippet undefined">
            <pre><code class="ptls"><span class="keyword">fn</span> <span class="function">getA</span>()
  <span class="call">sleep</span>(<span class="number">200</span>)
  <span class="quotes">&quot;</span><span class="string">a</span><span class="quotes">&quot;</span>
<span class="keyword">end</span>

<span class="keyword">fn</span> <span class="function">getB</span>()
  <span class="call">sleep</span>(<span class="number">100</span>)
  <span class="quotes">&quot;</span><span class="string">b</span><span class="quotes">&quot;</span>
<span class="keyword">end</span>

<span class="std">Async</span>.<span class="call">getFirst</span>([getA, getB]) <span class="comment">-- Returns &quot;b&quot; after 100 ms</span></code></pre>
          </div>
        </div>

        <hr />

        <h2 class="def-name" id="sleep">
          <code><a href="#sleep">Async.sleep(ms)</a></code>
          <span class="tag" title="Global"></span>
        </h2>

        <div class="contents">
          <p>
            Pause the current execution branch for <code>ms</code> milliseconds.
          </p>

          <div class="snippet undefined">
            <pre><code class="ptls"><span class="call">sleep</span>(<span class="number">1000</span>) <span class="comment">-- Pause for 1 second</span></code></pre>
          </div>
        </div>

        <hr />

        <h2 class="def-name" id="yield">
          <code><a href="#yield">Async.yield()</a></code>
        </h2>

        <div class="contents">
          <p>
            Pause a loop temporarily to allow other concurrently running
            functions to progress.
          </p>

          <div class="snippet undefined">
            <pre><code class="ptls"><span class="std">Async</span>.<span class="call">yield</span>() <span class="comment">-- Pause to allow other functions to run</span></code></pre>
          </div>
        </div>

        <div id="sequencer">
          <hr />
          <div>
            <a class="next" href="/stdlib/Bool">
              <div>Next ></div>
              Bool
            </a>
          </div>
        </div>
      </main>
    </article>
  </body>
</html>
